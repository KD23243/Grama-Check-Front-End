<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" />
    <title>User Portal</title>
</head>

<body>
    <div class="container">
        <div id="user-portal-wrapper" class="wrapper">
            <div id="user-portal-header" class="portal-header">
                <h3 class="grama-name">Grama Check</h3>
            </div>
            <div id="user-portal-logo" class="portal-logo">
                <a href="index.html" class="logout-btn"><img src="img/user.png" alt="user" width="20%"
                        height="auto"> LOG OUT</a>
            </div>
            <div id="user-portal-body" class="portal-body">
                <h3>User Portal</h3>
                <a href="request-form.html" class="main-btn">Request Grama Certificate</a>
                <a href="user-status.html" class="main-btn">Check Status</a>
            </div>
            <div id="user-portal-footer" class="portal-footer">
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" class="help-btn"><img src="img/help.png"
                        alt="help" width="20%" height="auto"></a>
            </div>
        </div>
       <!--<button onclick="auth.signOut()">sign out</button>-->
    </div>
</body>
<script src="https://unpkg.com/@asgardeo/auth-spa@latest/dist/asgardeo-spa.production.min.js"></script>
<script>
var auth = AsgardeoAuth.AsgardeoSPAClient.getInstance();

auth.initialize({
	signInRedirectURL: "http://127.0.0.1:5500/user-portal.html",
	signOutRedirectURL: "http://127.0.0.1:5500/more-info.html",
	clientID: "5ynhFBWAfqYznFHVf0J5mYAxexAa",
	baseUrl: "https://api.asgardeo.io/t/sample404",
	scope: [ "openid","profile" ]
});
    async function authenticate() 
{   
	let user = undefined;

	// If there are auth search params i.e code, session_state, automatically trigger login.
	// Else, try to see if there's a session.
	if (AsgardeoAuth.SPAUtils.hasAuthSearchParamsInURL()) {
		user = await auth.signIn({ callOnlyOnRedirect: true });
		console.log("has params")
	} else {
		user = await auth.trySignInSilently().then(response=>{
			console.log(response);
		})
		
	}
	
}
authenticate(); 
</script>

</html>