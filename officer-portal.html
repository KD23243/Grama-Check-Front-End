<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" />
    <title>Officer Portal</title>
</head>

<body>
    <div class="container">
        <div id="officer-portal-wrapper" class="wrapper">
            <div id="officer-portal-header" class="portal-header">
                <img src="img/logo.jpg" alt="help" width="30%" height="auto">
            </div>
            <div id="officer-portal-logo" class="portal-logo">
                <a onclick="logOut()" class="logout-btn"><img src="img/user.png" alt="user" width="20%" height="auto">
                    LOG OUT</a>
            </div>
            <div id="officer-portal-body" class="portal-body">
                <h3>Officer Portal</h3>
                <a href="pending-requests.html" class="main-btn">Check Pending Requests</a>
            </div>
            <div id="officer-portal-footer" class="portal-footer">
                <a href="help-page.html" class="help-btn"><img src="img/help.png" alt="help" width="20%"
                        height="auto"></a>
            </div>
        </div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://unpkg.com/@asgardeo/auth-spa@latest/dist/asgardeo-spa.production.min.js"></script>
<script>
    //authenticate admin

var adminAuth = AsgardeoAuth.AsgardeoSPAClient.getInstance();
    adminAuth.initialize({
        signInRedirectURL: "https://nimbuzz01.github.io/Grama-Check-Front-End/officer-portal.html",
            signOutRedirectURL: "https://nimbuzz01.github.io/Grama-Check-Front-End/index.html",
            clientID: "RMhFnIyA4u21SQrYA1mGaGNUAo8a",
            baseUrl: "https://api.asgardeo.io/t/sample404",
            scope: [ "openid","profile" ]
    });
adminAuth.signIn({callOnlyOnRedirect:true}).then(()=>{
            adminAuth.getAccessToken().then(Response=>{
           sessionStorage.setItem("token",Response);

    });
})
var adminAuth = AsgardeoAuth.AsgardeoSPAClient.getInstance();
adminAuth.getAccessToken().then(Response=>{
            sessionStorage.setItem("token",Response);

    });
function logOut() {
    adminAuth.signOut().then(response=>{
        if(response.message="The user must be authenticated first."){
            alert("Session expired, Sign in again");
            window.location.href="index.html";

        }
    })
    
}
  


</script>



</html>